<!DOCTYPE html>

<!--
  portfolYOU Jekyll theme by yousinix
  Free for personal and commercial use under the MIT license
  https://github.com/yousinix/portfolYOU
-->

<html lang="en" class="h-100">

<head>

  
  
  

  

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:type" content="website">
  <meta property="og:title" content="Coffee Cup Dispenser">
  <meta property="og:description" content="A 6-DOF robot arm programmed to manipulate cup from counter to delivery robot tray cup hole using Moveit2 planning">
  <meta property="og:image" content="https://kuralme.github.io/assets/final.gif">

  <title>Coffee Cup Dispenser</title>
  <meta name="description" content="A 6-DOF robot arm programmed to manipulate cup from counter to delivery robot tray cup hole using Moveit2 planning">

  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.ico">

  <!-- Theme style -->
  <script src="/assets/js/theme.js"></script>

  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">

  <!-- Bootstrap CSS CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">

  <!-- Animate CSS CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/assets/css/style.css">

</head>


<body class="h-100 d-flex flex-column">

  <main class="flex-shrink-0 container mt-5">
    <nav class="navbar navbar-expand-lg navbar-themed">

  <a class="navbar-brand" href="/"><h5><b>MUSTAFA EGE KURAL</b></h5></a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
    <i class="fas fa-1x fa-bars text-themed"></i>
  </button>

  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
    <div class="navbar-nav ml-auto"><a class="nav-item nav-link active" href="/projects/">Projects</a>

      <a class="nav-item nav-link " href="/about/">About</a>

      <a class="nav-item nav-link " href="/contact/">Contact</a>

      <a class="nav-item nav-link " href="/resume/">Resume</a>

      

      <span id="theme-toggler" class="nav-item nav-link" role="button" onclick="toggleTheme()"></span>
    </div>
  </div>

</nav>
    <div class="col-lg-10 mx-auto mt-5 markdown-body">
  <h1 id="starbots-coffee-dispenser-project"><a href="https://github.com/kuralme/starbots_coffee_dispenser">Starbots Coffee Dispenser Project</a></h1>

<p>The final outcome of my work in The Construct’s Robotics Masterclass, featuring an advanced robotics application that demonstrates refined Pick-and-Place capabilities with the <strong>UR3e robotic arm</strong>. The Starbots Coffee Dispenser system is designed to automate a crucial step in robotic coffee service - transferring coffee cups from a counter to the delivery robot’s tray.</p>

<p>The project has two implementations:</p>

<ul>
  <li>A simulation branch that replicates same functionality in a Gazebo environment, allowing for safe testing and validation</li>
  <li>A real-world deployment, ran remotely connected to the <em>The Construct</em>’s Starbots Coffee UR3E robot</li>
</ul>

<p>Both implementations share core functionalities but are specifically tuned for their respective environments, ensuring optimal performance whether in simulation or real-world operation.</p>

<p>The project is structured into multiple ROS2 packages, each handling specific aspects of the automation:</p>

<h3 id="motion-planning--control">Motion Planning &amp; Control</h3>

<p>Utilized <strong>MoveIt2</strong> C++ API for:</p>

<ul>
  <li>Well defined robot kinematics and accurate modeling of the UR3e arm</li>
  <li>Advanced path planning with selected OMPL planners (primarily KPIECE)</li>
  <li>Real-time, collision-aware trajectory generation using OctoMap and dynamic scene updates from the perception pipeline</li>
  <li>IK kinematic solving with customized constraints to maintain the cup upright and avoid unwanted wrist rotations during transport</li>
  <li>Precise end-effector control for grasping and placement, including approach and retreat motions</li>
</ul>

<h3 id="perception-pipeline">Perception Pipeline</h3>

<p>Implemented a python object detection system using D415 RGB-D camera’s color and depth images. After the conversion from images to pointcloud, the perception system includes two separate detection pipelines for identifying the cup holders on the delivery robot’s tray:</p>

<ul>
  <li>
    <p><strong>Hough Circle Detection (Image-Based)</strong>:
Uses classical image processing on the RGB image to detect circular shapes corresponding to the tray’s cup holders. This outputs 2D circle centers and radii in image space.</p>
  </li>
  <li>
    <p><strong>Pointcloud-Based Detection</strong>:
Processes the pointcloud with PCL to locate the cup holder regions directly in 3D. Includes filtering, RANSAC, K-means clustering, segmentation, and geometric checks to identify the circular depressions on the tray.</p>
  </li>
</ul>

<p>After running both pipelines, a sensor fusion step combines their outputs. The image-based detections are projected into 3D, matched with the pointcloud detections, and then merged using a weighted average to generate a more stable and accurate 3D pose for each cup holder.</p>

<p>Additional perception features include:</p>

<ul>
  <li>
    <p>Detection and localization of coffee cups on the counter (Simulation only)</p>
  </li>
  <li>
    <p>Identification and tracking of available slots on the delivery robot’s tray</p>
  </li>
  <li>
    <p>Generation of an OctoMap representation of the environment for collision-aware planning using pointcloud</p>
  </li>
</ul>

<h3 id="task-management">Task Management</h3>

<p>Employed a behavior tree architecture to oversee the complete task sequence. The BT structure organizes the logic into modular, reusable nodes that manage both high-level decision making and low-level robot actions:</p>

<ul>
  <li>Pre-pick positioning with orientation constraints to align the end-effector for a reliable approach</li>
  <li>Approach/Retreat sequences that dynamically adjust based on the detected cup or slot position</li>
  <li>Cup grasping operations including gripper open/close control and height adjustments</li>
  <li>Transfer movements that ensure the cup is carried upright, using waypoint-based motion to avoid collisions and maintain stability during transport</li>
  <li>Precise placement into the goal cup holder on the delivery robot’s tray, relying on the fused perception output and aligned approach vectors</li>
  <li>Return to home position and ready state for the next service call, resetting the planning scene and BT context</li>
</ul>

<h3 id="visualization--monitoring-tools">Visualization &amp; Monitoring Tools</h3>

<p>Used Foxglove throughout the project to monitor system behavior, visualize data streams, and interact(service calls only) with the robot during both simulation and real-world execution.</p>

<ul>
  <li>
    <p><strong>Foxglove Desktop (Simulation):</strong>
Utilized for high-bandwidth monitoring of ROS2 topics, visualizing pointclouds, camera images, TF frames, and MoveIt planning scenes in real time. Also used for sending service calls during debugging and validating perception outputs before running full task sequences.</p>
  </li>
  <li>
    <p><strong>Foxglove WebApp (Real Robot):</strong>
Connected remotely to The Construct’s UR3e setup to observe live sensor data, track behavior tree status, verify planning results, and monitor the D415 camera feed. Enabled safe remote operations and system checks without direct access to the robot hardware.</p>
  </li>
</ul>

<p>Foxglove provided a unified interface for inspecting the entire system — perception, motion planning, and task execution — assisting greatly in tuning parameters, debugging failures, and validating final robot behavior.</p>

<h2 id="system-overview">System Overview</h2>

<p><img src="http://0.0.0.0:4000/assets/system_overview.png" alt="System" /></p>

<h2 id="real-robot-demo">Real Robot Demo</h2>

<p><a href="https://youtube.com/shorts/2kQtupTTEGs?feature=share"><img src="http://0.0.0.0:4000/assets/final.gif" alt="Final demo" /></a></p>

<h2 id="simulation-demo">Simulation Demo</h2>

<p><a href="https://youtu.be/4XE2JNb8slM"><img src="http://0.0.0.0:4000/assets/final_sim.gif" alt="Final Gazebo demo" /></a></p>

</div>
  </main>
  <footer class="mt-auto py-3 text-center">

  <small class="text-muted mb-2">
    <i class="fas fa-code"></i> with <i class="fas fa-heart"></i>
    by <strong>Mustafa Ege Kural</strong>
  </small>

  <div class="container-fluid justify-content-center"><a class="social mx-1"  href="mailto:kuralme@protonmail.com"
       style="color: #6c757d"
       onMouseOver="this.style.color='#db4437'"
       onMouseOut="this.style.color='#6c757d'">
      <i class="fas fa-envelope fa-1x"></i>
    </a><a class="social mx-1"  href="https://www.github.com/kuralme"
       style="color: #6c757d"
       onMouseOver="this.style.color='#333333'"
       onMouseOut="this.style.color='#6c757d'">
      <i class="fab fa-github fa-1x"></i>
    </a><a class="social mx-1"  href="https://www.linkedin.com/in/kme9/"
       style="color: #6c757d"
       onMouseOver="this.style.color='#007bb5'"
       onMouseOut="this.style.color='#6c757d'">
      <i class="fab fa-linkedin-in fa-1x"></i>
    </a><a class="social mx-1"  href="https://www.youtube.com//@kuralme1079"
       style="color: #6c757d"
       onMouseOver="this.style.color='#ff0000'"
       onMouseOut="this.style.color='#6c757d'">
      <i class="fab fa-youtube fa-1x"></i>
    </a>

</div><small id="attribution">
    theme <a href="https://github.com/yousinix/portfolYOU">portfolYOU</a>
  </small>

</footer>

  
  <!-- GitHub Buttons -->
<script async defer src="https://buttons.github.io/buttons.js"></script>

<!-- jQuery CDN -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- Popper.js CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"></script>

<!-- Bootstrap JS CDN -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<!-- wow.js CDN & Activation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.js"></script>
<script> new WOW().init(); </script>

<!-- Initialize all tooltips -->
<script>
$(function () {
    $('[data-toggle="tooltip"]').tooltip()
})
</script>
</body>

</html>